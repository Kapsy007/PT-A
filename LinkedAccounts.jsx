import {useState} from 'react'; import Card from './ui/Card'; import Button from './ui/Button'; export default function LinkedAccounts({onImport}){const [imp,setImp]=useState([]); const upload=(e)=>{const f=e.target.files[0]; if(!f) return; const r=new FileReader(); r.onload=()=>{ const text=r.result; const lines=text.split('\n').filter(Boolean); const hdr=lines[0].split(',').map(h=>h.trim()); const rows=lines.slice(1).map(l=>l.split(',').map(c=>c.trim())); const items=rows.map(rw=>{const o={}; hdr.forEach((h,i)=>o[h]=rw[i]); return o;}).filter(x=>x.Ticker); const mapped=items.map(i=>({ticker:i.Ticker+(i.Ticker.endsWith('.NS')? '':'.NS'), qty:Number(i.Qty||0), buyPrice:Number(i.BuyPrice||0), sector:i.Sector||'Unknown'})); setImp(prev=>[...prev,...mapped]); if(onImport) onImport(mapped); alert('Imported'); }; r.readAsText(f);} return (<div><Card><div><Button onClick={()=>alert('5Paisa demo')}>Link 5Paisa (demo)</Button></div><div style={{marginTop:12}}><label>Upload INDmoney CSV</label><input type='file' accept='.csv' onChange={upload} /></div></Card>{imp.length>0 && <Card><h4>Imported</h4><table><tbody>{imp.map((p,i)=>(<tr key={i}><td>{p.ticker}</td><td>{p.qty}</td></tr>))}</tbody></table></Card>}</div>)}
